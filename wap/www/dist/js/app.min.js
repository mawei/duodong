/**
 ** DaZhuang
 ** Last publish: Tue Oct 20 2015 20:15:24 GMT+0800 (CST)
 ** @version v0.1.0
 **/
!function o(){var o=angular.module("DZ",["ionic","ngFileUpload","DZ.config","DZ.services","DZ.controllers","DZ.util"],["$httpProvider",function(o){}]);o.run(["$ionicPlatform",function(o){o.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}]),angular.module("DZ.util",[]),angular.module("DZ.config",[]),angular.module("DZ.controllers",[])}();
!function(){"use strict";var t=angular.module("DZ.util",[]);t.factory("$ls",["$window",function(t){return{set:function(n,o){t.localStorage[n]=o},get:function(n,o){return t.localStorage[n]||o},setObject:function(n,o){t.localStorage[n]=JSON.stringify(o)},getObject:function(n){return JSON.parse(t.localStorage[n]||"{}")}}}])}();
!function(){"use strict";var e="dev",t={dev:"/server/",product:"/index.php?/api/",ponydev:"/dazhuang/index.php?/api/",method:"GET"};t.uploadPath=t[e]+"upload_evidence";var a=function(a){for(var n={},p=["getUsers","login","get_authcode","logout","output_result","get_lawyer_info","get_messages","create_case","upload_lawyer_info","get_cases","get_case_info","get_cases_by_victim","get_cases_by_lawyer","select_lawyer_to_case","get_quotations","create_payment","get_payments","upload_evidence"],o=0;o<p.length;o++){var s=p[o],r="",i=t.method;if("string"!=typeof s?(r=s[0],i=s[1]):r=s,r&&!n[r]){var _=n[r]={};_.name=r,_.path=a[e]+r,_.method=i}}return n},n=angular.module("DZ.config");n.constant("$env",e),n.constant("$unLogin",["index","app.login","app.register","app.register-lawyer-step1","app.register-lawyer-step2","app.register-lawyer-step3","app.register-lawyer-step4","app.register-lawyer-step5","app.case-list-lawyer","app.lawyer-index"]),n.constant("$ionicLoadingConfig",{delay:0,template:'<i class="icon ion-loading-c"></i>\n<br/>\nLoading...',noBackdrop:!1}),n.constant("$apiList",a(t)),n.constant("$uploadPath",t.uploadPath),n.constant("$eventType",{event_0:"未选择",event_1:"主要责任",event_2:"次要责任",event_3:"全部",event_4:"无",event_5:"同等",event_6:"无法查明"})}();
!function(){"use strict";function n(n){var o=[];for(var i in n)n.hasOwnProperty(i)&&o.push(i+"="+n[i]);return o.join("&")}var o=angular.module("DZ.services",["ionic","DZ.config"]);o.factory("$api",["$http","$rootScope","$state","$ionicLoading","$ionicLoadingConfig","$env","$apiList",function(o,i,t,r,a,c,e){var u={},f=function(o,i){var t=i.name,a=i.method,c=i.path;u[t]=function(i,t,e){var u=i,f=t||function(){};"function"==typeof u&&(f=u),"GET"==a&&(c=c+"?"+n(u)),r.show(),o({method:a,data:u,url:c}).success(function(n){r.hide(),f&&f(n)}).error(function(n){r.hide(),e&&e(n)})}};for(var s in e)e.hasOwnProperty(s)&&f(o,e[s]);return u}])}();
!function(){var e=angular.module("DZ"),t={guide:"/guide",upload:"/upload","do-upload":"/do-upload","edit-upload":"/do-upload/:id",login:"/login/:type",setting:"/setting",list:"/list",details:"/details/:id",register:"/register","register-lawyer-step1":"/register-lawyer-step1","register-lawyer-step2":"/register-lawyer-step2","register-lawyer-step3":"/register-lawyer-step3","register-lawyer-step4":"/register-lawyer-step4","register-lawyer-step5":"/register-lawyer-step5","lawyer-index":"/lawyer-index","case-list-lawyer":"/case-list-lawyer"};e.config(["$stateProvider","$urlRouterProvider",function(e,r){e.state("index",{url:"/index",templateUrl:"templates/guide.html"}),e.state("page-404",{url:"/page-404",templateUrl:"templates/error/page-404.html"}),e.state("app",{url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"mainCtrl"});for(var a in t)t.hasOwnProperty(a)&&!function(t,r){e.state("app."+t,{url:r,views:{menuContent:{templateUrl:"templates"+r.split("/:")[0]+".html",controller:("edit-upload"==t?"do-upload":t)+"Ctrl"}}})}(a,t[a]);r.otherwise("/index")}]),e.run(["$ionicPlatform","$rootScope","$ls","$state","$unLogin",function(e,t,r,a,l){var i=!1,s="",n=r.getObject("userInfo");n&&n.token&&(t.token=n.token),t.$on("$stateChangeStart",function(e,t,r,a,l){s=t.name,i="index"==t.name}),t.$on("$locationChangeSuccess",function(e,n,o,p,g){if(t.isLogin=1==r.get("isLogin"),l.indexOf(s)>-1)return!1;if(!i&&!t.isLogin){var u=r.get("selectType")||"1";a.go("app.login",{type:u})}})}])}();
!function(){return angular.module("DZ.controllers").controller("appCtrl",["$scope","$ionicModal","$timeout",function(o,n,l){o.loginData={},n.fromTemplateUrl("templates/model-login.html",{scope:o}).then(function(n){o.modal=n}),o.closeLogin=function(){o.modal.hide()},o.login=function(){o.modal.show()},o.doLogin=function(){console.log("Doing login",o.loginData),l(function(){o.closeLogin()},1e3)}}])}();
!function(){return angular.module("DZ.controllers").controller("case-list-lawyerCtrl",["$rootScope","$scope","$api",function(e,s,c){s.search={page:1,number:10,order:"id desc",status:"",user_id:e.token},s.caseList=[],c.get_cases_by_lawyer(s.search,function(e){"success"==e.message&&(s.caseList=e.data||[])},function(e){})}])}();
!function(){return angular.module("DZ.controllers").controller("detailsCtrl",["$scope","$state","$api","$eventType",function(i,e,s,t){i.case_id=e.params.id,i.disableEdit=!0,i.info={},s.get_case_info({case_id:i.case_id},function(e){"success"==e.message&&e.data&&e.data[0]&&(i.info=e.data[0],i.disableEdit="待审核"!=i.info.status,i.info.responsibility_CN=t["event_"+i.info.responsibility])})}])}();
!function(){return angular.module("DZ.controllers").controller("do-uploadCtrl",["$rootScope","$scope","$state","Upload","$timeout","$ionicPopup","$api","$uploadPath",function(e,t,o,a,i,l,n,r){function c(e,t){l.confirm({title:"提示信息",template:"确认删除 "+e.name+" 吗？"}).then(function(e){e&&t()})}function s(e,t,o){angular.forEach(e,function(e){e&&!e.$error&&(e.upload=a.upload({url:r,file:e,case_id:t,image_type:o}),e.upload.then(function(t){i(function(){e.result=t.data})},function(e){e.status>0&&l.alert({title:"上传错误",template:e.status+": "+e.data})}),e.upload.progress(function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))}))})}function u(){var e=[];return angular.forEach(t.cardFiles,function(t){t.result&&e.push(t.result.data)}),angular.forEach(t.protocolFiles,function(t){t.result&&e.push(t.result.data)}),angular.forEach(t.otherFiles,function(t){t.result&&e.push(t.result.data)}),e.join(",")}t.cardFiles=[],t.cardViewFiles=[],t.protocolFiles=[],t.protocolViewFiles=[],t.otherFiles=[],t.otherViewFiles=[],t.data={address:"",time:"",department:"",responsibility:"0",evidence_id:"",user_id:e.token},t.case_id=o.params.id,t.case_id&&n.get_case_info({case_id:t.case_id},function(e){"success"==e.message||l.alert({title:"获取案例详情错误"})}),t.uploadCardFiles=function(e){e&&(t.cardFiles=t.cardFiles.concat(e),angular.forEach(t.cardFiles,function(e,o){var a=new FileReader;a.onload=function(e){t.cardViewFiles[o]=e.target.result},a.readAsDataURL(e)})),s(e,t.case_id,1)},t.uploadProtocolFiles=function(e){e&&(t.protocolFiles=t.protocolFiles.concat(e),angular.forEach(t.protocolFiles,function(e,o){console.log(e);var a=new FileReader;a.onload=function(e){t.protocolViewFiles[o]=e.target.result},a.readAsDataURL(e)})),s(e,t.case_id,2)},t.uploadOtherFiles=function(e){e&&(t.otherFiles=t.otherFiles.concat(e),angular.forEach(t.otherFiles,function(e,o){var a=new FileReader;a.onload=function(e){t.otherViewFiles[o]=e.target.result},a.readAsDataURL(e)})),s(e,t.case_id,3)},t.delCardImg=function(e,o){c(e,function(){t.cardFiles.splice(o,1),t.cardViewFiles.splice(o,1)})},t.delProtocolImg=function(e,o){c(e,function(){t.protocolFiles.splice(o,1),t.protocolViewFiles.splice(o,1)})},t.delOtherImg=function(e,o){c(e,function(){t.otherFiles.splice(o,1),t.otherViewFiles.splice(o,1)})},t.submitUpload=function(){t.data.evidence_id=u(),n.create_case(t.data,function(e){"success"==e.message?l.alert({title:"已提交案例资料"}).then(function(e){o.go("app.list")}):l.alert({title:"提交案例资料失败!"})})}}])}();
!function(){return angular.module("DZ.controllers").controller("guideCtrl",["$scope",function(n){}])}();
!function(){return angular.module("DZ.controllers").controller("lawyer-indexCtrl",["$scope","$ls",function(l,n){}])}();
!function(){return angular.module("DZ.controllers").controller("listCtrl",["$rootScope","$scope","$api",function(e,s,t){s.search={page:1,number:10,order:"id desc",status:"",user_id:e.token},s.caseList=[],t.get_cases_by_victim(s.search,function(e){"success"==e.message&&(s.caseList=e.data||[])},function(e){})}])}();
!function(){return angular.module("DZ.controllers").controller("loginCtrl",["$rootScope","$scope","$state","$api","$ls","$ionicPopup","$timeout",function(e,t,o,n,a,c,i){function s(){return i(function(){t.countDownSecond>0?(t.countDownSecond-=1,s()):(t.isSendAuthCode=!1,t.countDownSecond=d,i.cancel(l))},1e3)}var u=o.params.type;a.set("selectType",u),t.data={username:"",type:1==u?"lawyer":"victim",code:""};var l,d=60;t.isSendAuthCode=!1,t.countDownSecond=d,t.doLogin=function(){return t.data.username&&t.data.code?void n.login(t.data,function(t){"success"==t.message&&(a.set("isLogin",1),a.setObject("userInfo",{type:u,token:t.data}),e.isLogin=!0,o.go("app.upload")),"failed"==t.message&&c.alert({title:"提示信息",template:t.data})}):(c.alert({title:"提示信息",template:"请出入电话号码或者验证码！"}),!1)},t.getCode=function(){t.data.username?n.get_authcode({mobile:t.data.username},function(e){"success"==e.message&&(t.isSendAuthCode=!0,l=s(),c.alert({title:"提示信息",template:"动态码已发送!"}))}):c.alert({title:"提示信息",template:"请填写手机号码!"})}}])}();
!function(){return angular.module("DZ.controllers").controller("mainCtrl",["$rootScope","$ls","$state",function(o,t,n){o.toLogin=function(){var o=t.get("selectType")||"1";n.go("app.login",{type:o})}}])}();
!function(){return angular.module("DZ.controllers").controller("register-lawyer-step1Ctrl",["$scope",function(r){}])}();
!function(){return angular.module("DZ.controllers").controller("register-lawyer-step2Ctrl",["$scope",function(r){}])}();
!function(){return angular.module("DZ.controllers").controller("register-lawyer-step3Ctrl",["$scope",function(r){}])}();
!function(){return angular.module("DZ.controllers").controller("register-lawyer-step4Ctrl",["$scope",function(r){}])}();
!function(){return angular.module("DZ.controllers").controller("register-lawyer-step5Ctrl",["$scope",function(r){}])}();
!function(){return angular.module("DZ.controllers").controller("registerCtrl",["$scope",function(r){}])}();
!function(){return angular.module("DZ.controllers").controller("settingCtrl",["$scope","$state","$api","$ls",function(n,t,o,e){n.logout=function(){e.set("isLogin",0),e.setObject("userInfo",null),t.go("index")}}])}();
!function(){return angular.module("DZ.controllers").controller("uploadCtrl",["$scope",function(o){}])}();